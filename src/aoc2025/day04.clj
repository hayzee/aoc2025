(ns aoc2025.day04)

; part 1


(def test-input (-> "..@@.@@@@.\n@@@.@.@.@@\n@@@@@.@.@@\n@.@@@@..@.\n@@.@@@@.@@\n.@@@@@@@.@\n.@.@.@.@@@\n@.@@@.@@@@\n.@@@@@@@@.\n@.@.@@@.@."
                    (clojure.string/split-lines)))

(def input (-> "@@@..@@@.@.@.@@@..@@@@@@@@@@@@@..@.....@@.@.@@@.@@@..@@@@@@@@..@..@@@@.@.@@@@@@....@@.@@.@@@@@@@@.@@@@@@@@@@@.@.@@.@@@@@@.@.@.@@...@@@@@@..\n@.@@.@.....@.@@@@@.@..@.@.@@@.@.@.@..@..@@@.@@..@@@.@@....@@@@.@@@..@@..@@@@.@@@@@.@@@@.@..@@@@..@@...@@@@@.@@@@@.@...@@..@@@@@..@@@@@.@@..\n@@@@..@@.....@@@@.@.@@@.@.@.@@@@@@@.@@.@@@@@.@@.@..@..@@..@@...@@@@..@@@@...@@@@.@..@.@@@.@.@@.@.@@.@@.@@@..@.@@.@@@..@.@@.@@@.@@..@@..@@@.\n@.....@.@@@@@...@@@.@@@@@@@..@.@@.@.@@@@@@@@..@.@.@@@@@@.@.@@.@.@@@@@@.@..@@@.@@@..@@@..@@@@@.@.@@.@@@@.@..@.@@@..@@...@@@.@@@@@.@..@@.@.@@\n@@@@.@@@@@@.@...@..@@..@@..@@.@@@@@...@@.@.@@@.@@...@@.@.@@@@..@.@@@.@.@@@@@@.@@@@@@@.@@..@@.@.@.@.@@...@@..@@@@@@@.@@..@@@@.@@@@@@.@@@@@..\n@@@..@@@.@@@..@@.@@.@@@@@@.@@..@...@@.@.@@@@@@@@@@@.@@@...@@..@@.@.@.@@.@@.@@..@@@@@@@@@.@@@.@@@..@@@@@..@@@@..@@.@@@@..@.@.@@.@@@@..@@@@@@\n.@@.@.@@@.@@..@@@@@.@@.@@@@..@.@@.@@@.@@...@.@..@.@@.@.@..@@.@@@.@@.@@.@@@@.@@@@@@@@...@.@.@@@@..@.@.@...@@@...@..@....@@.@@@.@@@@.@@.@@@.@\n.@..@..@@@.@@.@@......@@@@@.@@@@@.@@@@.@.@@.@@@@@@..@.@.@..@.@@@@@@....@...@.@.@@.@@.@@@@@@.@@@@@.@@@@@@......@.@@@.@.@..@@@@@@@.@.......@@\n@@.@@...@@..@@@.@.@.@...@..@.@@@@@@.@.@..@.@@.@.@@@..@@@@@@@@@...@.@@@@@...@@@@@@@@@..@@@@..@@@..@.@@@@.@@@@@@...@@.@@...@@@@..@..@@@@.@@@@\n@@@@....@.@..@@@@.@@..@@@@@@@.@@...@.@@@..@@.@@@..@.@.@@.@@@@...@@@@..@@@.@@@..@@@@@@@.@@@@@@..@@@.@.@.@@@@.@..@.@@@@@...@@.@@@@@@.@.@@@.@@\n.@@@@@@@..@.@@@@@.@.@@@@@@@@.@@.@@@@.@@@.@@@@.@@@@@.@@@.@@@@@@@..@@@@...@@@.@@.@@@..@@@@@@@.@.@...@.@@.@@.@.@@@@.@.@.@.@@@@@.@@@.@.....@@@@\n@.@..@@@...@.@@@.@..@@..@@@@.@@.@@..@@@@@@@@@@@..@@.@@...@.@@@@@@@@@.@@@.@@@@@@@@@.@.@.@@@@@.@@@..@.@@@@@.@@@.@@@@@@@........@..@.@@..@@@@@\n@@@...@.@.@...@@.@.@@.@..@@@@.@.@..@@.@@@.@..@..@@...@@.@...@.@@@@.@@.@@@.@.@@@@.@.@@@@@@@....@...@.@@@@..@@@.@.@.@@@.@..@@.@.@@@@.@@.@.@@@\n@.@.@.@@@@@@@@.@@.@@@.@@@..@@.@@@@@..@..@@@@@@@@....@.@@.@@@.@.@.@@@.@@..@@.@.@.@@.@..@.@.@.@@@@@.@@@..@.@@..@..@@@@@@@@....@@@@@..@.@...@.\n@@@@@@@@@@...@@@@@@.@..@..@.@..@@@@...@@.@.@@@@@.@@@@.@@@.@@..@.@@.@..@@@@..@@..@..@@@@@....@@.@.@@@@.@.@@...@..@@@@.@@...@@@@.......@@@@.@\n.@@@..@@@@@@.@@@.@.@.@@..@@@@..@@@@@@@.@@.@@@@...@@.@@@.@@@@.@@.@.@.@@@...@@..@@@@@..@@..@.@@@.@@.@@.@@@@@@...@.@@.@.@@.@.@....@@.@@@@@.@.@\n...@@.@@@@@@@.@@@@@@@@@@@@@.@.....@@@@.@@@.@@.@.@@@..@.....@@@@..@@@@@@...@@@.@..@.@..@.@.@@@@..@@@@@...@.@@@@.@@@@.@@@@.@@@.@.@@@@@.@...@@\n@@@..@@@@@@@@@@.@@@@@@..@@@...@@@@@.@@@....@@@..@..@@.@..@@..@.@...@..@@.@@@.@@@@@@.@.@@@@.@....@@@@@@@@..@@@@.@@@.@@@.@@..@@@.......@..@@@\n@@.@@@.@@..@.@.@@@@@.@.@@@@@..@.@@@.@@@@.....@.@@@.@@...@..@@@@.@.@@@@@@.@.@@.@@.@@@@@@@.@...@@@.@@@..@@@..@..@@..@@@@.@.@@@.@@@@@..@@..@@@\n@@@.@@.@@..@@@@@@.@.@@.@@@@@@..@@.@@@..@@@@@@@.@@@@..@@@@@@.@.@@@@@@@.@@.@.@@@@@.@...@@@@.@.@.@@@@@.@..@@@.@@@@@@.@@@@@@@.@.....@@..@.@..@.\n@@@.@@@@@@@@..@@@.@@@@.@@@.@@@.@@@.@@.@@@@.@@.@.@@@@@.@@@@@@@@.@@@@@.@@@@@@@@.@...@.@.@@.@@@@.@@.@@@.@@@@@@.@.@@@.@@...@@@@@@...@@.@...@.@@\n@@..@@....@.@@@..@@@.@@@@.@@@@@@.@@.@.@.@@@@@.@.@@@@.@@@@@@@@@@.@..@@@@.@@@@@@@@.@.@@@@@.@@..@@@@@@@.@..@@@.@@.@.@.@.@@@@@@.@.@.@@.@@@.@..@\n@@.@@@.@.@.@@..@@.@@@.@.@....@@@@@.@.@@..@..@@...@@@@@@..@..@.@@@@@.@@.@.@....@.....@@...@@@@@@@.@@@@@@@@@@@@.@@..@..@@..@@@.@@..@@.@.@.@..\n@.@@@@@.@@@@@@@@@@@.@@@@.@.@@@..@.@..@.@@@..@@.@@..@.@@..@.@..@@@@@..@@@@.@.@@...@.@@@.@@@@@@@@..@.@@@@..@@@..@.@@.@.@@.@.@.@@@@@@....@...@\n@@@@.@..@@@.@@.@@@@@@@@.@@@.@@@..@@..@@@.@@@.@@.@@@@@.@...@@@.@.@@.@.@.@@.@@..@..@@..@..@@@....@...@..@@@..@..@..@.@@@@@@.@.@@@.@@@@@@...@@\n@.@@@@.@....@@@.@@..@@.@@@@@...@@@@@.@.@@@..@@@@.@@@@.@@.@@@.@@@@@@.@@.@@@.@@@@@@@@@@@.@..@@..@@@.@..@@@@.@@@@@@@@@@@@@@@@.@@.@@@@@.@..@@@.\n@@@@@@@.@..@@@@@@@.@@.@@@@@@@.@@@.@....@@@@@@@..@@..@@@@@@.@.@@@@.@..@.@.@@.@@@..@@@@@@@@@@..@@..@@@@.@@@@..@@@@.@.@@@@@.@@..@.@@@.@@@@@@@@\n@@.@.@@@.@@.@.@.@...@..@.@...@@@@@@@@..@@@.@.@@.@..@.@...@@@@.@@@....@@@@@@@@..@@@@.@@@@@@.@@@@@..@...@..@.@@.@@@@@@@..@.@@@@@@@@@@..@..@@.\n@@@@.@@..@.@@@@.@..@.@@...@@@.@@....@.@.@.@..@.@@@@@.@@@@@.@@@..@@@.@@@.@@@.@@@@..@@.@.@@.@@@@@@@@.@.@@@@.@@@@@@@.@@@@.@.@@@.@@..@@@@@.@@@@\n@@@@.@@@@..@@@@@@@..@@@@@@@.@@@@.@..@@..@@.@@.@@@@.@@@@@@@@.@@.@@@@@@@@.@@..@.@.@.@@@.@@@.@@@.@.@.@@.@@@@@.@@@..@..@@@..@@..@...@@.@.@@..@@\n.@@@@..@@.......@@.@@@@@@@@.@@@.@@@@@@@....@.@@..@@.@@..@@@@@@...@@@@..@@@@@@@..@@@.@@.@@@...@@@...@..@@@.@.@..@..@@@@@@..@@@@@.@.@.@@@@@@.\n@@@@@@...@.@@@@..@@@.@@@@@@@@.@@.@@...@.@@@@@@.@@.@@...@@.@...@@@.@@.@@@.@@@@@.@.@@@@.@@...@@...@@..@@@@.....@@@@@@..@@@@@@@@@.@.@@@@@@.@@@\n@..@@.@@.@@@@@@.@@@@.@@...@@@@.@.@@@..@..@@@..@@@..@@..@.@@@@@@@@@..@@@@@@.@@.@@.@.@.@.@.@.@..@@@..@@@@@..@@@@@@@@@@@@.@.@@.@@@@@@@@...@@@.\n@@@.@@@.@...@@.@@..@@..@@@@....@@@@@@....@@.@@.@@@@@.@@@...@@@@..@..@...@@@@@@@.@@.@.@@@@@.@.@..@.@@.@.@@.@@@@@@.@@@.@.@.@@@@@....@.@@@@@.@\n@@@@@@@.@.@@@..@@..@@.@@@@.@..@@.@@.@@.@@@@.@@@@@.@@@@.@.@..@....@@..@@@@@@@.@@@@@@@@@@@@@........@@@@@...@@.@@@@@@@.@@@@@@..@@@@@@.@..@@.@\n.@@@@..@.@@.@@@.@@...@..@.@@@@@.@@@@..@@@@@.@@@@@.@..@@@@..@..@@@.@@@.@@@.@@@..@@@.@...@.@@@.@..@.@@@@@..@.@@.@.@@@@..@@@@@@@@@@.@.@.@.@@.@\n..@@@@..@.@@.@@@@@.@@..@.@..@@.@..@@@@@@.@.@..@@..@@@@.@@.@.@@@@.@.@@@.@@@@.@.@@@@@@@.@...@..@@..@@@@.@@@@@..@.@@...@@@.........@@@@@@..@@.\n@@@@.@.@.@@..@.@@.@@@@@@@..@@@@@.@.@@@@.@@@.@.@@@@@@@.@@@@@.@@....@.@@@.@..@..@@@@@.@@@@@@.@@@@.@@@..@@@.@@.@@@@.@.@@@@.@@.@@..@@@@@@@@@@@@\n@@@@@.@@....@@@@.@...@...@@@.@@@..@.@@@@@@@@.@@@@.@@@@.@@@@.@@@@@@@.@.@@...@.@...@...@.@@@.@@.@@..@@@@@@.@.@.@.@@..@@.@@@@@@@@@@..@...@@@@.\n.@@.@..@@@@@.@..@@@@@@@.@@.@..@.@@@@@.@@@@@@@@@@@@@@@@@@.@.@@@@@@.@@@@@@@@@@@@.@@.@@@.@..@@.@@.@@@@...@.@@..@.@@@@.@@@@@.@@@.@.@.@@@..@@@@.\n@@..@@....@@.@.@@.@@@@.@@@...@.@@@@@@.@@@.@@..@..@@@@@@@@@.@@@..@@@@@@@@@@.@.@.@..@@@@@@@@@@@@.@@@@@.@..@.@@.@.@@.@@@@@@.@@.@.@@@@@@@@@@@@.\n.@@..@@@@.@@@@.@@.@@.@@@@.....@@@@@.@@.@.@@.@..@@.@@@@@@@@.@@@@.@.....@.@.@@..@@.@@.@@.@@@@..@@@@.@.@@@@@@@@.@@@@@@@@.@@@@@@@@@@.@@@@.@@@.@\n@@@@@@@@@@.@@@@...@@..@@@@.@.@@@@.@.....@@@@.@....@.@@@@..@@@@@.@@.@...@@@@.@@@.@.@.@@@.@.@@.@@.@.@.@@@@@@@...@@.@@@..@@@@@@.@@.@..@@@.@@@@\n.@@@.@@@..@@........@.@@.@@..@@.@@@@.@@......@.@.....@..@@@..@@@@@@.@....@.@.@@@...@.@@@@..@@@@@.@@@@@@@@@@.@@@@@@@@@@@@.@@.@.@@..@@@.@.@@@\n..@@@@@@@.@..@@@.@@....@@.@@.@@.@@@@@@.@@@@..@@@@@@.@@@.@@@.@.@@.@@@@......@@@@..@@@@.@@@@@.@.@...@@@@@.@..@.@.@@@@@@@@@@@.@.@@.@.@@.@@@@@@\n...@.@@@.@...@@@@......@@@@@@@@@.@@@.@@@@@@@.@@@.@@@..@@.@@.@@..@.@@@@@@@@@.@@@@@@.@@@@@@.@.@@.....@@.@@...@@@@@....@@@.@@@.@.@@@..@@@@..@.\n...@..@..@@..@.@@.@@@@@@@@@..@@@.@@@@@@@@@@.@@@...@..@@@@@.@@@.@....@@.@.@...@.@@@@@@@@.@.@@..@@...@@..@@@..@@.@@@.@@.@@.@@@@@.@.@@..@.@@@@\n@@.@@@....@@@@@@@@.@.@@@..@@.@@@@.@@@@@.@.@@@..@.@.@@.@...@.@@..@.@@@@@@@.@@.@@@@@@..@.@.@@.@@@@.@.@@@@@@@@@@@@...@@@@.@@@@@...@.@@@..@.@@@\n..@.@@@.@.@..@@@.@...@@@.@@@@@@@@@@..@@@@@.@@.@@@.@@@@@@@.@..@.@@@.@....@@@@@@@@@@@.@..@@@@..@.@.@@@.@@@...@.@@.@..@@@@.@@..@@@...@.@..@@@@\n@@@@@@@@@.@@@@@@@@.@@.@@@@@@..@@@..@.@.@@@@@.@@@@@.@.@@@.@@.@@@@.@.@..@@@@@.@.@.@..@@@@@@@.@@.@.@@@@.@@.@@@@...@......@.@@.@@.@@..@.@@@@@@.\n.@@.@.@@@@@@...@.@@.@@.@@@@@.@@@@..@@@.@.@..@@@.@...@.@@@@@@@@@@...@.@..@..@@@@@@@.@..@@@@.@@.@..@.@@@@@@.@@@@@@@.@@@@@@...@@@.@@.@@@@@..@@\n@@@.@@....@@.@.@...@..@@.@.@@.@@...@@@...@@.@@@@.@.@@@@@@@@@@.@@@@@@@@@.@..@@@@..@.@@.@@@@.@@@..@@@@@.@@@@..@..@..@@.@@@@@@@@@@@@@@.@@@.@.@\n@..@@..@@..@@@@@@..@.@@.....@@..@@@...@@@@.@.@.@@@@@@.@@@@.@@....@@..@@@@@.@.@.@.@....@..@@.@@@@.@..@....@@.@.@@@@@@@@@....@@@@@@@@.@@@...@\n.@@@@.@@@@@.@.@.@@@..@@@...@@.@@@@@@@@@@@.@@@@..@@.@@.@@@@@@.@@@@@.@@@.@.@@@@@@.@.@..@@@.@@@@@@@.@.@@@..@.@@@...@@@.@@..@@@.@@@...@..@.@@@@\n.@.@.@@..@@.@@@.@.@@@@@@@@.@@@@@@@@@@.@.@@@.@.@@..@@..@@@.@....@@@.@@.@@@.@@@@@@@@@...@.@..@.@@@..@@.@@@.@@@.@@@.@@@@@.@.@@..@.@@..@@.@@@@.\n@.@@.@.@..@@..@@@@@@@.@@.@@..@@@@@...@@@@@.@@@.@.@.@@.@.@..@@@@.@@.@@@..@.@@@@@@@@@@@@..@@@@@.@...@.@@@@.@@@@@...@@.@.@@@@@@@@..@@@@....@@.\n.@@..@..@@@@@@.@@@@..@@@.@@@@@...@@.@@@.@.@...@.@.@@..@@@@@.@@.@.@...@....@...@@@.@@.@.@.@..@.@@@.@.@@..@.@.@.@@@@.@..@....@@..@@.@@@...@@.\n.@@...@@.@@@.@.@@@@.@@@@@.@@.@@@...@@.@@@@.@@..@@@@....@@@..@....@.@@@.@@@@@.@.@@.@@@.@@@..@@@@@@@@@@@@..@@@.@@..@@@@@@@.@.@.@.@@@@@@@@@@@.\n.@@@..@@@@..@@@@@@.@@.@..@@.@@@..@..@@.@@@@@@...@@@.@@...@@.@@.@@@.@@@@.@@@@@@@@@@.@@..@.@@@.@@@@.@@.@@@@..@@.....@@...@@@@.@..@@.@@@...@@@\n@@@..@@@@..@@.@@@@@....@@@@@@.@.@...@@@@@@@@.@.@@@@@.@@.@@@.@@@@@@@@@@..@..@.@.@@..@.@.@@@@....@@@.@@.@.@@@@.@..@@.@..@..@.@@@@@@@...@@@@@.\n..@@@@@@@.@@@..@@..@..@@@.@.@@.....@@.@@@@@@@.@@.@@.@@@@@@@@@@@.@@@.@..@@@@.@@@@.@..@@.@..@.@...@@.@@@@@@@@@..@@@@@@.@.@@@.@.@.@.@...@.@...\n@@..@.@@@.@@@..@@.@@@@@@@@.@.@.@.@@.@.@@@@@.@@@@.@@.@@@@.....@@@@@.@...@@@..@.@@@.@@.@.@@@@.@.@.@@.@...@..@..@.@.@.@@@@@@@@@.@@@...@@@@..@.\n.@@@@@..@.@@@@@@.@@@@.@@@@@@@@@@@@..@.@...@@@@.@@.@@.@@@.@@@.@.@@@..@@@..@.@@@@@@.@.@@@@@..@.@..@@@@@.@@@@@..@@@..@.@..@..@@@.@.@.@.@@....@\n@@@@@...@..@.@.@@.@.@@@@@@..@@..@@@@@.@.@@@@@@.@@@@@@@..@@@@@@@@@@@@@@@.@.@@.@@@.@@.@@@.@@@.@@@..@@@@.@.@@@@.@@@.@@.@.@@.@@@@..@...@.@..@@@\n....@@.@@@@@.@@@...@@@@.@@@.@.@.@.@@@.@@@.@@@@@@@@@@..@..@.@.@.@@.@@@@@@.@...@.@..@....@@@@@@@@.@.@..@@..@@@@@@@.@.@@.@@@@.@..@.@@..@@@@@..\n@@@.@...@@.@@.@@.@..@@.@@@.@@@@@.@@.@@@.@@@..@@@@@.@@.@@..@@@@.@@@@@@@.@@.@@@@@...@@@@.@....@@.@@@.@..@@.@.@.@.@@@.@@.@@..@@@.@@.@@@@@@@@@.\n@@.@.@@@..@.@.@@..@@@@.@@@.@..@@@..@@@.@@@@.@@.@@@@@..@...@@@@.@@@@.@@@@@...@.@@..@@..@@.@@.@.@..@@.@@.@.@...@...@..@@@.@@..@@@@@@@@@...@@@\n@@@@@.@@@@.@@@..@.@.@.@@@.@@..@.@@.@.@..@@.@@.@@@@@.@.@....@.@..@@@@@.@@@@@@@@@@@.@.@@.@@@.@@@@@@@.@@.@@..@@@@@.@@@@@@.@@@..@@@.@@@.@@@@.@@\n@@@@@.@.@@@.@.....@@@.@@.@@@@@..@..@@@@@.@@..@.@..@@@@.@@@@.@@....@@@.@.@@@.@...@.@@@@@@.@.@@@@@@.@@@..@.@.@@@@.@.@..@@@@@@.@@@@@@@.@.@@..@\n.@@@@..@@@@.@@@@@@@@..@.@.@@@.@.@@@@..@....@...@.@@@@@@@@...@.@.@@.@@.@.@.@@..@.@@.@@@..@@..@@.@..@@.@@@@@@.@@.@@@@@.@.@@@@@.@@@.@@@@@@.@@@\n@@..@@.@@.@@.@@.@.@.@@.@.@@.@@@@@.@@@....@.@.@@@@@@..@@@.@@@....@.....@@@@..@@@@@@.@.@@@@@@@@...@.@@..@@@@.@@..@..@@@@@@@@@..@@@.@@@@@@@.@@\n.@@.@@@@@@@@@@@@@@@@.@...@@..@@.@@@.@.@@@@@.@@@.@@..@@..@.@.....@..@....@@@@.....@.@@.@.@@@@@@.@@@@..@@@@@...@@@@@@@..@@@.......@...@@.@@@@\n@@@@.@.@@@.@@@@.@@@.@.@@@@@@@@@@@..@@@@.@.@.@.@@@@..@.@.@@@@.@@.@.@@@..@.@@.@....@.@@.@.@@...@@@.@@.@@.@@@@..@.@@@@@@.@@@..@..@@.@@..@.@@@@\n.@@@.@....@@..@@@@...@@@.@..@@@@@@@.@@@@@@.@..@@@@.@@@..@@@@@@.@@...@@@.@@@@@....@@..@@...@.@@@@.@@@@@@@.@.@@@@@....@@..@.@@@@@.@.@.@@@...@\n...@@@...@..@@@..@@..@@.@@.@.@@@@@.@@@@@@@@.@..@@@@@.@@@.@.@@..@@..@@...@@@@@.@@@@..@@@...@@@@@@@@@@@@.@@@@@@@@.@@@.@@@@..@@.@@...@@..@..@@\n@..@.@@.@.@@.@@@.@.@.@.@@..@@@@@@.@.@@@@@@@@..@@@@.@@...@.@..@@.@.@@.@..@.@@.@@@@@@.@@@..@.@..@@.@@.@@.@..@.@@..@@@@@.@.@@@...@.@@@@@.@@.@@\n@@@@..@@.@@@@@@@@@@.@.@@.@@@.@@@...@@@@@@.@@@..@@@@@@@.@@@@@.@@@@@@@.@@@.@@@@..@@@.@@@.....@@@..@@@.@..@@@@@@.@.@@....@@@.@@@..@@...@.@.@@@\n..@.@.@.@..@@@@...@.@@@@@@@@.@..@@.@@@@@@@@@@...@@@@@@.@@.@@@@@@@@@@..@@@@@@.@@@@@@@@@@@.@@@@@@@.@.@.@@@@..@@@@@@.@@.@@.@@.@.@@@@@@@@..@@@@\n@@..@@@@@@@@@@@@..@.@@@@@.@@@.@@@@@.@@@@..@@@.@@@.@@..@@@@.@....@@.@@..@@@@@@@@@@.@@@@@.@.@@.@@@@@@..@@@@@@.@@@@@.@@.@@.@@@..@@..@.@.@..@@.\n@.@@..@.@@@@.@@@...@.@@@@@.@@@.@.@@@@.@.@@@.@@.@@@.@@@@@.@..@.@@@@@@@.@@.@.@@.@@@@.@@@@@@@.@@@@@@@@.@.@@.@@@@@@@@@@.@.@.@@.@@.@.@@@@@@@@@@@\n@.@@@@@@.@@.@@@.@@@.@.@..@@@@@@.@@.@@@@@.@@@...@@@@@@@@@@@.@@..@@@@.@@.@@@@.@@@@@@@@.@@..@@@@@@..@.@@@@@@..@@@@@.@@@@@@.@..@.@.@@@.@.@@@.@@\n@@@@@@@@@@.@@@@@.@@@..@.@.@.@@@@.@@@.@.@@.@..@@@.@@@@@@@.@@.@@@@@@@@@@.@..@@..@.@@@.@@@@.@@.@@@.@.@@@@@.@@@@@..@..@@@@@@@..@@@@....@.@@@..@\n.@@.@..@.@.@@@@@...@@..@.@@@...@@@@@@..@@@.@@.@@@.@@@.@..@@@@.@...@@@@@.@@@@..@@.@@@.@@@@@@@@@@@@@@@@@.@.@.@@@..@...@.@@@@@.@.@@@@@@@.@.@.@\n..@@@...@@.@@@@@@...@..@@@@@@@...@@@@@.@..@@@@@@@@@@@@.@@@@@.@@.@@.@@@.@.@@.....@@@....@.@@@@...@.@@@..@.@@@@..@.@@@@@@@..@@@.@.@@@@@@@.@@.\n@@@@@@@@@...@@@.@@.@@..@@@@@...@.@@@..@@@..@@@.@@@@..@@.@@@@..@@@@@@@@@.@@@@.@@@@@.@@@..@@.@@@@.@@@@.....@@@@@@@@@@@.@@@..@@@@.@@.@@.@@@@@@\n@.@@@@@@@@..@..@@@.@..@@..@.@@@@@@@@@@..@@@.@.@@.@@..@.@@@@.@.@@@.@@@@.@@@@.@.@@@@.@@.@@@@@@.@@.@@@.@@.@@@@.@.@@@.@@.@@@@@@.@.@@.@@@.@@.@@@\n..@@.@@@.@@@@@@.@.@.@....@@...@@@.@.@@@@@.@@@@@...@@@@@@@.@@@@@.@@@.@@.@.@..@...@@@.@@@@@@.@@@@.@@@@@@@..@@@..@@@@..@@.@@..@@@@@@@@.@.@.@@.\n.@.@@@@@@@@.@..@@.@@@.@@..@.@..@@@@@.@@.@....@@..@@@.@@@@.@@.@@...@@@.@@@@@@..@.@@.@@..@@@.@.@@@.@@@@@@@.@@.@@...@.@..@@..@@@@@@@..@@...@.@\n@@@@@..@@@...@@.@.@@@@@@@..@@@..@@.@@..@@@@@@@@@..@@.@@@@.@...@...@..@@@.@.@@@@@@@@@@.@.@...@@..@@@@@@.@@@@@@@@@.@@@@@@@.@..@.@.@@@@@@.@@@@\n@.@..@@@@@..@@@@@@..@@@..@@@.@.@@@@@@@.@..@..@.@.@@.@@@..@..@@@@..@@@.@@@@@@.@@@@@..@.@.@@@...@@@@.@@@......@@.@@@.@..@.@@@@.@..@..@@.@@@@@\n@@..@@@@@@@@@@@@...@@@@@@@@@@@..@@@.@@@.@@.@@@.@@.@.@@@@.@@.@..@@@@@..@@@@@@.@....@@@@@@..@@..@@.@..@..@@@@@@@@@@..@.@@...@..@@@@@@@@....@@\n@@@@@@@..@.@.@.@.@@..@@..@@.@@.@.@@@..@..@@..@.@@..@..@@@@.@@@@.@@.@@.@@@...@.@@@@@@..@@.@@@@..@.@@.@@.@.@@...@.....@.@@@....@@@@@@..@.@..@\n.@.@.@@@@@@@@.@.@@@.@...@@@@@@@@.@.@@.@@@@@@@@.@@@@@..@@@@@@@.@.@.@@.@@@@@@@@@.@@@@@@@@..@.@...@.@@@@.....@@.@@@..@.@@@..@@@@@.@@@@@...@@.@\n@@..@@.@@@.@.@.@@..@...@@@.@@@.@@.@..@..@@@@..@@.@@.@@@@@.@@@...@@@..@@.@....@.@.@@.@@@@@@@@@@@@...@.@@@@@@@.@..@@@.@@@.@..@@@@@@.@@@.@@.@.\n....@@@@@@@@@..@.@@@@@...@.....@@..@@@..@@.@.@@..@@@@.@@.@@@@@@.@......@@.@@@@@..@.@@.@@@.@@@..@@@@..@@@@@@...@.@.@.@@..@...@@.@@@@..@@@@@.\n@@@@@@@.@.@@@@@@@@.@@@...@@@@@@@@..@@...@.@@.@@.@@.@@@.@@@@@@.@.@@.@.@.@@@@.@@@...@@@@@@..@@@@@@@.@...@@@@..@...@@@@.@.@@@@@..@.@@@..@@.@.@\n@.@@@...@.@@@.@@@@@.@@.@...@.@@@@@@.@@@@@@.@..@@.@@@@@@@@@@@@@@@.@@.@@@@......@.@@.@@@..@..@@@@....@@@@@@@@@@@@@.@@.@@@..@@@...@@@.@@..@@@.\n@.@@@@@.@@@.@@@.@..@@@@@@@..@@@.@@@...@@.....@@@@..@..@@@.@...@@@@..@..@@@@..@..@@..@@.@.@@.@.@@@@.@.@@.@...@@@@.@@@@@.@.@.@@@@@@.@@.@@@@@@\n@@@@@@@@@.@..@..@@..@@@@@@@.@@.@.@@@.@@@@.....@@@@.@@@.@@...@.@@.@@..@....@.@@@@@.@.@@@@@@@@@@@.@..@@.@@@@@@@@..@@@.@.@@.@@@@@@@@@..@@..@.@\n@..@@@@@@@@.@@.@@@@@.@@@.@..@@@.@@.@@...@@@@.@@.@.@..@@.@.@@@...@@@.@@.@@.@@@@@@.@@@..@.@@.@.@@@@@...@@@@.@@@@.@.@@..@..@..@@@@.@.@.@@.@@@@\n..@@.@@@@@@@@.@...@@@@@.@@@@@.@.@..@@@@@.@@@@@@@@@@.@@.@.@@@.@@.@@@@.@@.@@@.@.@@@@@@.@@@@..@.@@....@@@.@.@@.@@.@..@@@@..@.@@.@@.@...@@@@@..\n@@@@@@.@@@@@@@@@@@...@@.@@@@@@@...@@@.@..@....@..@@.@.@@@@@@@@@@@.@..@@.@.@@@@@@@@...@@..@@@.@@@.@...@@@.@@@@@@..@...@.@.@@..@.@@@@@.@@@@@.\n.@@@@.@@.@.@.@@@..@@@@...@@.@.@@@@.@@@..@@@.@@@@@@....@.@@@..@.@.@@@@@.@@.@.@@.@@@@@@@@..@@@.@..@.@@@..@@..@@.@@@@@.@@@@@.@.@@.@.@@.@@@.@.@\n..@@@@.@.@@..@@@@@.@@@@.@.@@@@@.@.@..@.@....@@@.@@@@@@.@.@@@...@@@@.@@@..@.@@@@@.@@.@@@@...@@.@.@.@.@.@@@@.@@..@@..@@....@..@@@@@@.@.@@@.@.\n.@@.@.@@.@@...@@@@@@@.@@.@.@@.@@@@@@.@.@@@..@@@@..@@@@.@.@@.@@.@@@.@....@@.@@.@@@@@@.@.@.@.@@@@@@@.@@@@@@.@@.@.@@.@...@@@.@@.@.@.@@@@..@.@.\n@.@@.@@@..@@@@@@..@@@.@@..@@@..@@@@.@@@.@@@.@.@@@@@.@@@@.@@@@@.@@@.@@@@@.@@@@@.@.@@@@.@@..@.@@@@@@@.@@@@.@.@..@@@@@..@@@@.@.@.@.@@@@@@@@@@.\n.@..@@.@@@@.@@..@@@@@@.....@@.@@@@.@@@@@@.@.@.@@@.@@@@@.@@@@.@@@.@@@..@.@@@.@.@.@@..@@@.@@.@@...@@@.@@@..@.@@@@@@@.@@@.@.@@@@.@@@@...@@.@@.\n@@.@@@@...@@@.@@@@@@@@@@.@@..@@.@@@.@@..@.@@..@@@@@.@@@@@.@@@@@.@.@@@@@..@@@.@@..@..@.@@@..@@.@.@@@.....@.@@@@@.@@...@@@.@@@...@@.@@@@.@.@@\n.@@.@@@.@@@.@@..@.@@.@.@@@.@@@..@@@.@@@..@...@@@.@@@@.@@@.@.@....@@.@.@@@@@@@@@@@@.@@@@@.@@@@.@@.@..@.@.@@@@@@.@@@@@..@@@@@@@...@@.@...@..@\n.@@@..@@.@@@@@.@...@...@@@@@@.@.@.@.@@@.@.@@.@.@.@....@@@.@@.@.@..@@@@.@.@.@@@.@.@@@@.@@@@.@@@@.@.@@.@.@@@@@@@@.@@@.@.@@.@...@@@.@@@.@@@@@@\n@@@@@@@..@@@....@@@@@.@@.@@.@@.@.@.@@.@@.@@@@.@@.@.@.@@@@.@..@.@@@.@..@@.@@@@@@.@@@...@..@.@...@@.@.@@..@.@.@@@.@@@.@...@.@.....@.@@@.....@\n@@@.@@.@.@@@.@@@@...@@@@..@.@..@.@@@@.@.@..@@@@@@@@@@@@.@@@.@...@@.@@@.@.@@....@@.@@@@@...@.@.@@@.@@.@.@.@@.@@@..@.@@@..@@@@@@@.@.@.@.@.@.@\n@@@@.@@@@@.@.@..@.@@.@@@@@@@.@@@.@..@@@@@@@@.@@..@@.@@@@@@@..@.@@.@@.@@@@@@@.@@@@@@@@@@@.@.@@...@..@..@@@@.@@@.@@@.@@@@@@@@@.@@.@.@..@@@@@.\n@@@...@@@@@@.@@@@@.@.@.@@@@@.@@@@@@@.@@@@.@@.@..@.@....@@@@..@.@@@@@..@.@@@..@@.@@@@@@.@@@@@...@....@@.@@..@.@.@@....@.@..@@.@.@@@.@@..@.@@\n.@@.@@@@.@.@@@.@@....@@@@@.@@@@.@@..@..@@@.@@@@@@@.@@@@......@.@@..@@.@.@@.@...@@@.@@.@.@@@@@@..@@@@@.@.@.@@@@@..@@@.@.@@@@@..@@.@@.@..@.@.\n@.@@@.@@..@.@@@@.@@...@@@....@@@@..@@@.@@@@@.@@@@@@.@.@.@@@@@.@.@@@.@@...@.@@.@@.@@.@@@..@@@.@@@.@.@@...@..@.@@@.@@.@@.@.@@....@@.@@.....@@\n...@..@@...@@@@@.@@.@@@@@@@@.@@@@@@.@.@.@@.@@@.@...@.@..@.@@@@.@.@@@@@@@@@@@@.@.@@@@.@@@@@@@..@@..@@.@@@@@.@@@.@@@@..@@.@@@@.@.@.@@..@@@@@.\n@..@.@@@@@.@...@.@@@@@..@@@@@@@.@@@@@@@.@@@@@@@@.@@.@.@@@@..@@@@@@@..@@@@@@@@@@@@@..@@@..@.@@@@@@@@@.@@@@@..@.@.@@@@@@@@.@@@@@@@@..@@...@@@\n.@@@@@@@.@@@.@.@@@.@.@.@@...@.@@.@.@@@.@@..@@@@@@@.@@..@@@@.@...@@@@.@@@@@.@@@@.@@@.@.@.@..@...@@@..@@@@@@@@@.@@.@@..@.@@@.@.@@@..@@@@.@.@.\n.@.@.@...@@@.@.@@.@.@..@@.@@.@..@@@@@@@..@...@.@@@@@@.@@@.@@.@...@.@@@@.@@.@@@@.@.@.@@@.......@@@...@@@..@.@@@..@...@@@.@..@@@@.@@@@@@.@.@@\n.@.@@@@@..@@@@.@.@@...@@.@@.@@@@@...@@@@@@@@.@..@@@@.@.@@.@@@@@@.@@.@.....@...@@@@@@@.@@@..@.@@.@@@@@@.@.@@@@@@@@.@@@@.@@@@@@@@...@@@@@...@\n.@@.@@...@@...@@@@@..@@.@.@..@@@@@@.@@@..@.@.@@@@.@@@..@@@@@@@@@@@..@@@@@@@@@@@@@@@.@@@.@@@@@@..@@.@.@@@@@@@@.@@@@@.@@.@@@.@.@@@@.@@@.@@.@.\n@@@@@@@@@@@.@@...@@..@.....@@@@@@@@..@..@..@@@@@@....@.@@.@@@..@@@@@@@@@.@@.....@@.@@...@.@...@....@@@@@@@.@@@...@@.@...@@.@.@@@@@.@@@@...@\n@.@@.@@..@@@@.@@.@@@...@@@@@@@@@@.@.@@@..@@...@@...@....@@@@..@.@@@..@.@@@@..@@@@@@@@@@@@.@@.@.@.@.@@..@@..@@@@..@.@@@.@@..@.@@.@@@@...@@@@\n@@.@@@@.@.@@.@@.@@@@@..@.....@@@@@@.@@@@.@@...@@@@@.@@@@@.@.@@@@..@..@...@@.@@@@@@@@@..@..@.@..@@.@.@@@@.@.@@.@@.@.@@@.....@.@@@@.@@@@@.@@.\n@@@...@.@@..@@@.@@.@@@@.@..@..@.@@@@@@.@@@@..@.@@@.@....@@.@@.@@@@@.@.@...@...@.@@@....@@@...@@.@@@@@@@.@@.@@@.@@@@@@@.@@@.@.@@@..@.@@...@@\n@.@@@@@@@@@..@@@@@@..@@@@.@@.@.@@@..@.@.@...@@@@@@.@@@..@.@@@@..@@@@@@@.....@@@@.@@.@@.@.@@@@.@....@@.@@@.@.@@.@.@.@.@@@..@@.@...@.@@..@@.@\n@@@@@@@..@.@@@@.@@..@@.@.@@@..@.@@...@@.@@.@@@@.@.@@...@@@.@@@@@@@..@@..@.@@@.@@@@@.@@@@@.@.@@.@@@.@@@...@@..@@@@@@@@@..@@@@..@@@@@@.@@@.@@\n..@.@@@@@@@@@@.@..@@...@....@@@.@.@@...@@@@@@.@.@@@@@@@@@@.@.@@@@@.@@@@.@@@@.@@..@@.@...@..@@...@@@.@.@..@@.@@@.@.@@@@.@@@@..@@@@.@....@@@@\n@@@.@.@.@@.@.@.@@@...@@@@@@@@.....@@@@.@@@@@...@..@@.@@.@@@...@..@@@.@@@@@..@@@.@..@.@@@@..@@@.@...@@..@.@@@@@.@@.@@..@@@.@@@@@@@.@@@@@@@.@\n@.@..@@....@@.@@.@.@.@@@@@..@@@@@.@@@...@@@@@.@@..@@.@@@.@...@.@.@@@@..@@.@.@@@@@..@..@@@@@@@@@@@@@.@@@@..@.@@.@.@@@@@.@.@@@..@@@@@@@.@@@@.\n...@.@@@@@.@@@@@@.@@@@.@@@..@@.@@@.@@@..@@@@@@@.@@...@.@..@@@@.@@@.@@.@@@.@..@..@@.@@@.@@@..@@.@@@.@@..@@.@@...@........@@...@@@@@@@@@.@@.@\n.@..@@@..@..@@@@...@@..@@...@@@..@.@@.@@@.@@@@@@@@@@.@@@@@..@..@@@@.@@@.@@@@.@@.@..@@@@@..@@@@@..@@@@.@@..@.@.@.@@@@@...@@@@@@.@.@.@@@@@.@.\n@@@.@.@@.@@@@....@.@@..@@.@@@@@.@.@@..@@@..@@.@@.@.@.@@.@@.@@@.@.@@.@.@@@@.@@@@@@@..@@..@@.@@@@@@@...@@.@.@.@...@..@@@.@@..@@@..@@.@@@@.@@@\n@@.@@.@@.@......@@.@@.@.@@@.@@@@.@@@@@@@@.@@@.@@@..@@..@@@@@..@.@@@@...@.@@@@@@@@@@.@@...@@.@@.@.@@..@@@@..@.@.@...@..@@@@@.@@@.@.@.@@@...@\n@@.@@@@@@@@@@.@@@@.@@@@..@@.@@@.@@@.@@...@@@.@@..@..@.@..@..@.@@@....@@..@@.@@@@@@......@@@..@...@@.@@@@..@@@..@.@.@@@.@@@@@@@.@@..@.@@@@@.\n@@@.@@..@@@.@@@@.@.@.@@.@@@..@..@@@@@...@@@@@.@@@@@.@@..@..@@@@.@@@@.@@@@@..@..@@@@@@@....@@@@@.@...@@@@@@@@@@@@..@@@@@.@..@@@...@@@.@..@@.\n.@....@.@@@@@@.@@.@@..@@@.@@@@.@@@@@@@@.@@..@@@@@@@..@.@@..@@.@....@.@.@...@@@..@@....@@@@@.....@@@@@@@@@@@@@.@@@@@.@..@.@.@..@@@@@@@@@.@@.\n.@@@@.@@@@.@@@.@@@@@.@..@@@.@@@@@@@@@..@.@@@..@@@@@@.@.@@..@@@.@@.@@.@...@..@@@@@@@.@@@@@.@.@@.@@.....@@@@@....@@.@@.@@@@.@.@@@@@..@@@@.@@@\n"
               (clojure.string/split-lines)))

(def THRESHOLD 4)

(defn cols
  [input]
  (count (first input)))

(comment
 (= (cols input) 139)
 )

(defn rows
  [input]
  (count input))

(comment
  (= (rows input) 139)
  )

(defn surrounds
  [[r c]]
  [
   [(dec r) (dec c)]
   [(dec r) c]
   [(dec r) (inc c)]

   [r (dec c)]
   ;[r c]
   [r (inc c)]

   [(inc r) (dec c)]
   [(inc r) c]
   [(inc r) (inc c)]])

(defn surrounding
  [input pos]
  (->> (surrounds pos)
       (map (partial get-in input))))

(defn filter-surrounding
  [input pos set-e]
  (filter set-e (surrounding input pos)))

(defn removable?
  [input pos]
  (and
    (= (get-in input pos) \@)
    (< (count (filter-surrounding input pos #{\@})) THRESHOLD)))

(defn all-pos
  [input]
  (for [r (range (rows input))
        c (range (cols input))]
    [r c]))

(defn solve
  [input]
  (->> (all-pos input)
       (map (partial removable? input))
       (filter true?)
       count))

(solve test-input)

(solve input)

; part 2

(defn converge
  "Same as iterate, but stops once the value doesn't change anymore."
  [f x]
  (iterate f x))

